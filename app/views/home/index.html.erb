<div id="wrapper-tvp" >
	<div id="container-tvp" >

		<!-- BANNER TVP -->
		<div id="banner-tvp" >
			<%= render partial: "shared/banner_tvp", locals: { :bco => false } %>
		</div>

		<!-- CAROUSEL -->
		<div id="carousel-wrapper">
			<div id="carousel-horizontal-wrapper">
				<div id="carousel-horizontal">
					<% @carousel.elements_inorder.reverse.each do |carousel_elem| %>
						<% if carousel_elem.photo.present? %>
							<div class="carousel-elem" data="<%= carousel_elem.x %>;<%= carousel_elem.y %>;<%= carousel_elem.w %>;<%= carousel_elem.h %>">
								<%= image_tag Photo.find(carousel_elem.photo).image.url(:display) %>
							</div>
						<% end %>
					<% end %>
				</div>
			</div>

			<div id="carousel-vertial-wrapper">
				<div id="carousel-vertical">
					<% @carousel.elements_inorder.reverse.each do |carousel_elem| %>
						<% if carousel_elem.photo.present? %>
							<div>
								<%= image_tag Photo.find(carousel_elem.photo).image.url(:display), :style => "width: 600px; height: 400px;" %>
							</div>
						<% end %>
					<% end %>
				</div>
			</div>

			<div class="clearfix"></div>

		</div>

		<!-- MENU TVP -->
		<div>
			<%= render partial: "shared/menu_tvp" %>
		</div>

		<!-- NOTICIAS -->
		<div style="font-family: latha, latha_ie; font-size: 1em; width: 100%; background: #FFF; height: 150px; position: relative; margin-top: -4px;">

			<div id="home-news-1" class="home-news" style="width: 24.9%;">
				<% if !@home_news[0].nil? %>
					<%= image_tag @home_news[0].thumbnail.url(:display2), :style => "width: 100%; height: 100%;" %>
				<% end %>

				<div class="news-link"></div>
			</div>

			<div style="float:left; width: 0.2%; height: 100%; background: #FFF;"></div>

			<div id="home-news-2" class="home-news" style="width: 24.8%;">
				<% if !@home_news[1].nil? %>
					<%= image_tag @home_news[1].thumbnail.url(:display2), :style => "width: 100%; height: 100%;" %>
				<% end %>

				<div class="news-link"></div>
			</div>

			<div style="float:left; width: 0.2%; height: 100%; background: #FFF;"></div>

			<div id="home-news-3" class="home-news" style="width: 24.8%;">
				<% if !@home_news[2].nil? %>
					<%= image_tag @home_news[2].thumbnail.url(:display2), :style => "width: 100%; height: 100%;" %>
				<% end %>

				<div class="news-link"></div>
			</div>

			<div style="float:left; width: 0.2%; height: 100%; background: #FFF;"></div>

			<div id="home-news-4" class="home-news" style="width: 24.9%;">
				<% if !@home_news[3].nil? %>
					<%= image_tag @home_news[3].thumbnail.url(:display2), :style => "width: 100%; height: 100%;" %>
				<% end %>

				<div class="news-link">
				</div>
			</div>
		</div>

		<div id="legals-tvp">
			<%= render partial: "shared/legals_tvp", locals: { :bco => false } %>
		</div>

	</div>
</div>

<script type="text/javascript">
	$(function() {

		$("html").css("width", "100%");
		$("html").css("min-height", "100%");
		$("html").css("background", "linear-gradient(top , #FFFFFF, #a3a3a3) repeat-x");
		$("html").css("background", "-moz-linear-gradient(top , #FFFFFF , #a3a3a3) repeat-x");
		$("html").css("background", "-webkit-linear-gradient(top , #FFFFFF , #a3a3a3)repeat-x");
		$("html").css("background", "-ms-linear-gradient(top, #FFFFFF , #a3a3a3)repeat-x");
		$("html").css("filter", "progid:DXImageTransform.Microsoft.Gradient(startColorstr='#FFFFFF', endColorstr='#a3a3a3')");

		// Se corrigen las imagenes
		$(".carousel-elem").each(function() {
			if($(this).attr("data") != "") {
				// Se colocan bien las imagenes
				var img = $(this).find("img");

				if(img.length > 0) {
					var dataAttr = $(this).attr("data").split(";");
					var data = {
						x: parseFloat(dataAttr[0]),
						y: parseFloat(dataAttr[1]),
						w: parseFloat(dataAttr[2]),
						h: parseFloat(dataAttr[3]),
					}

					img.css({
						marginLeft: '-' +  data.x + 'px'
					});
				}
			}
		});

		// Comportamiento del carousel horizontal
		$('#carousel-horizontal').carouFredSel({
			circular: true,
			direction: "right",

			items: {
				visible: 4,
				start: -3
			},
					
			scroll: {
				items: 1,
				fx: "scroll",
				easing: "linear"
			},

			auto: true,
			next: '#galeria-prev',
			prev: '#galeria-next'
		});

		// Comportamiento del carousel vertical
		$('#carousel-vertical').carouFredSel({
			circular: true,
			direction: "right",
			synchronise: "#carousel-horizontal",

			items: {
				visible: 1,
				start: 0
			},

			scroll: {
				fx: "scroll",
				easing: "linear"
			},

			auto: true,
			next: '#galeria-prev',
			prev: '#galeria-next'
		});

		$('#carousel-wrapper').hover(function() {
			$("#carousel-horizontal").trigger("pause");
			$("#carousel-vertical").trigger("pause");
		}, function() {
			$("#carousel-horizontal").trigger("play");
			$("#carousel-vertical").trigger("play");
		});

		// Se corrige el menu
		$("#menu-tvp").css("margin-top", "-5px");

		// Efectos de las noticias
	 	var newsitems = $('.home-news').find("img");
		for (var i = 0; i < newsitems.length; i++) {
			$(newsitems[i]).hover(function() {
				for (var j = 0; j < newsitems.length; j++) {
					if(newsitems[j] != this) {
						$(newsitems[j]).css('opacity', '0.8');
						$(newsitems[j]).css('filter', 'alpha(opacity = 80)');
					}
				}
			}, function() {
				for (var j = 0; j < newsitems.length; j++) {
					if(i != j) {
						$(newsitems[j]).css('opacity', '1.0');
						$(newsitems[j]).css('filter', 'alpha(opacity = 100)');
					}
				}
			});
		};

		// Posicionamos links
		$(".news-link").each(function() {
			if($(this).parent().width() == 249) {
				$(this).css({ "left" : "125px" });
			} else {
				$(this).css({ "left" : "124px" });
			}
		});

	});
</script>